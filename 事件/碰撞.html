<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Document</title>
	<style type="text/css">
	#div1{
		width: 300px;
		height: 300px;
		background: red;
		position: absolute;
		top: 300px;
		left: 600px;
		font-size: 50px;
		font-weight: bold;
		line-height: 300px;
		text-align: center;
		color: white;
	}
	#div2{
		width: 100px;
		height: 100px;
		position: absolute;
		background: blue;
	}
	</style>
	<script type="text/javascript">
		window.onload = function(){

			var D1 = document.getElementById("div1");
			var D2 = document.getElementById("div2");
				drag(D2);
			function drag(obj){
				obj.onmousedown = function(ev){
					var ev = ev || event;
					var disX = ev.clientX - this.offsetLeft;
					var disY = ev.clientY - this.offsetTop;

					document.onmousemove = function(ev){
						var ev = ev || event;

						var L = ev.clientX - disX;
						var T = ev.clientY - disY

						if(L<0){
							L=0;
						}else if(L> document.documentElement.clientWidth-obj.offsetWidth){
								L = document.documentElement.clientWidth-obj.offsetWidth;
						}

						if(T<0){
							T=0;
						}else if(T> document.documentElement.clientHeight-obj.offsetHeight){
								T = document.documentElement.clientHeight-obj.offsetHeight;
						}

						var L1 = L;
						var T1 = T;
						var R1 = L + obj.offsetWidth;
						var B1 = T + obj.offsetHeight;

						var L2 = D1.offsetLeft;
						var T2 = D1.offsetTop;
						var R2 = L2 + D1.offsetWidth;
						var B2 = T2 + D1.offsetHeight;

						
						


						if(R1 < L2 || L1 > R2 || B1 < T2 || T1 > B2 ){
							D1.style.background = "green";
						}else{
							D1.style.background = "red";
						}

						

							
						obj.style.left = L + "px";
						obj.style.top =  T+ "px";

					}

					document.onmouseup = function(){
						document.onmousemove = document.onmouseup = null;
					}

					return false;
				}


				
			}			
		}
	</script>
</head>
<body>
	<div id="div2"></div>
	<div id="div1">碰到就改变</div>
</body>
</html>